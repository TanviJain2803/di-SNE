# diSNE
`diSNE` is a tool to perform t-SNE, t-distributed stochastic neighbor embedding, on a pre-filtered and clustered dataset. t-SNE aids with non-linear dimensionality reduction for high-dimensional data, making it applicable when analyzing single-cell RNA sequencing (scRNA-seq) data, as well as many other types of datasets.   
`diSNE` utilizes the existing Scanpy library to perform clustering on the given dataset, and uses the Matplotlib library to visualize the data. A full list of required packages can be found in `tests/requirements.txt`.   

For more information on t-SNE, visit [Laurens van der Maaten's website](https://lvdmaaten.github.io/tsne/).

# Install Instructions
Installation requires the `pandas`, `numpy`, `scanpy`, and `matplotlib` (seaborn?) libraries to be installed. You can install these with `pip`:  
`pip install pandas numpy scanpy matplotlib`  

Once these libraries are installed, `diSNE` can be installed with the following commands:

`git clone https://github.com/TanviJain2803/di-SNE`

`cd ./di-SNE`

`python setup.py install`  OR

`pip install .` (from inside the `diSNE` directory)  

If the install was successful, the command `diSNE --help` should display a help message.  

# Usage  
`diSNE [-options] data` 

To run `diSNE` on a small test example, use the following command:  
`diSNE example.h5ad`

## Options  
The only required input to `diSNE` is a h5ad file, containin the AnnData object that represents your dataset, with Leiden clustering already performed on it. For more information on Scanpy's AnnData structure, visit [Scanpy's documentation](https://anndata.readthedocs.io/en/latest/tutorials/notebooks/getting-started.html). For more information on HDF5 file format, visit the [HDF5 documentation](https://portal.hdfgroup.org/documentation/). 

Any of the additional options below can be specified if desired:   
- `-o`, `--output`: Path where file containing updated AnnData object with t-SNE results will be saved.  

- `-P`, `--PCA`: **Can only be used if PCA has been run on the input AnnData object.** Uses reduced linear dimensions to optimize runtime.

- `-p`, `--perplexity`: Perplexity is a core part of the t-SNE algorithm. Generally, perplexity can be thought of as a target number of neighbors for a point in the dataset (the higher the perplexity, the higher value of variance for that point). It typically ranges from around 5-50, and larger/denser dataset usually require a larger perplexity, but we suggest playing around with different perplexity values to see what visualizes your dataset most effectively.

- `-r`, `--learning-rate`: The learning rate controls the step size at each iteration during the optimization portion of t-SNE. The default value is 200, and recommended values range from 100-1000.
  
- `-T`, `--num-iterations`: This sets the number of iterations that optimization will run for. The default value is 1000.

- `-E`, `--early-exaggeration`: Early exaggeration is a constant that scales the original matrix of affinities in high-dimensional space. This emphasizes very similar points (high affinity values in the original high-dimensional space) in the lower-dimensional space earlier on, which will form 'clusters' of highly similar values. The default value is 4.

- `-g`, `--graph`: Path to the file where a plot of the t-SNE results will be saved. The plot is labeled by Leiden cluster.  

# Contributors
This repository was generated by Nimrit Kaur, Tanvi Jain, and Kathryn Chen as a project for CSE 185, spring quarter 2024. We referenced a variety of resources, including [van der Maaten and Hinton's original t-SNE paper](https://jmlr.org/papers/v9/vandermaaten08a.html), the [SciKit Learn documentation](https://scikit-learn.org/stable/modules/manifold.html#t-sne), and other t-SNE examples/walkthroughs.
